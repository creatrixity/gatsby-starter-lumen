<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.f0f0fd62dadbeb747e4d.css" id="gatsby-global-css">html{font-size:100}body{margin:0 0 0 calc(100vw - 100%);color:#222;line-height:1.625;font-size:1rem;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body,h1,h2,h3,h4,h5,h6{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif}h1,h2,h3,h4,h5,h6{font-weight:600}h1{font-size:2.5rem;line-height:3.25rem;margin-top:6.5rem;margin-bottom:1.625rem}h2{font-size:1.6875rem;line-height:2.4375rem}h2,h3{margin-top:3.25rem;margin-bottom:.8125rem}h3{font-size:1.375rem;line-height:1.625rem}h4{font-size:1.2rem;margin-top:2.4375rem}h4,h5{line-height:1.625rem;margin-bottom:.8125rem}h5,h6{font-size:1rem;margin-top:4.0625rem}h6{line-height:1.625rem;margin-bottom:.8125rem}img{max-width:100%;margin:inherit auto}hr,img{border:0;display:block}hr{color:#222;height:26px;margin:3.25rem auto;background-size:100% 26px;background-image:linear-gradient(180deg,transparent 1px,transparent 11px,#222 0,#222 15px,transparent 0,transparent 26px);width:6.25rem}a{color:#5d93ff;text-decoration:none}a:active,a:focus,a:hover{color:#f7a046}b,strong{font-weight:600}ul{list-style:square;margin-bottom:1.625rem}ul li{padding:0 .3125rem;margin-bottom:.625rem}p{line-height:1.625rem;margin-bottom:1.625rem}blockquote{padding:0;font-style:italic;text-align:center}figure{display:block;width:100%;height:auto}figcaption{line-height:1.21875rem;margin-top:.40625rem;color:#222;font-size:.875rem;font-style:italic;margin-bottom:0;text-align:center}.anchor{margin-left:-1.875rem!important;padding-right:.875rem!important}@media screen and (min-width:685px){figure.float-left,figure.float-right{max-width:19.375rem;padding:0 1.625rem}.float-right{float:right}.float-left{float:left}}code[class*=language-],pre[class*=language-]{color:#fff;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;text-shadow:0 -.1em .2em #000;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}:not(pre)>code[class*=language-],pre[class*=language-]{background:#141414}pre[class*=language-]{border-radius:.5em;border:.3em solid #545454;box-shadow:inset 1px 1px .5em #000;margin:.5em 0;overflow:auto;padding:1em}pre[class*=language-]::selection{background:#27292a}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:hsla(0,0%,93%,.15)}:not(pre)>code[class*=language-]{border-radius:.3em;border:.13em solid #545454;box-shadow:inset 1px 1px .3em -.1em #000;padding:.15em .2em .05em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#787878}.namespace,.token.punctuation{opacity:.7}.token.boolean,.token.deleted,.token.number,.token.tag{color:#cf694a}.token.builtin,.token.constant,.token.keyword,.token.property,.token.selector,.token.symbol{color:#f9ee9a}.language-css .token.string,.style .token.string,.token.attr-name,.token.attr-value,.token.char,.token.entity,.token.inserted,.token.operator,.token.string,.token.url,.token.variable{color:#919e6b}.token.atrule{color:#7386a5}.token.important,.token.regex{color:#e9c163}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[data-line]{padding:1em 0 1em 3em;position:relative}.language-markup .token.attr-name,.language-markup .token.punctuation,.language-markup .token.tag{color:#ad895c}.token{position:relative;z-index:1}.line-highlight{background:rgba(84,84,84,.25);background:linear-gradient(90deg,rgba(84,84,84,.1) 70%,rgba(84,84,84,0));border-bottom:1px dashed #545454;border-top:1px dashed #545454;left:0;line-height:inherit;margin-top:.75em;padding:inherit 0;pointer-events:none;position:absolute;right:0;white-space:pre;z-index:0}.line-highlight:before,.line-highlight[data-end]:after{background-color:#8794a6;border-radius:999px;box-shadow:0 1px #fff;color:#f5f2f0;content:attr(data-start);font:700 65%/1.5 sans-serif;left:.6em;min-width:1em;padding:0 .5em;position:absolute;text-align:center;text-shadow:none;top:.4em;vertical-align:.3em}.line-highlight[data-end]:after{bottom:.4em;content:attr(data-end);top:auto}.Author-module--author__photo--36xCH{display:inline-block;margin-bottom:0;border-radius:50%;background-clip:padding-box}.Author-module--author__title--2CaTb{font-size:1.125rem;font-weight:600;line-height:1.82813rem;margin:.8125rem 0}.Author-module--author__title-link--Yrism,.Author-module--author__title-link--Yrism:focus,.Author-module--author__title-link--Yrism:hover{color:#222}.Author-module--author__subtitle--cAaEB{color:#888;line-height:1.625rem;margin-bottom:1.625rem}.Icon-module--icon--Gpyvw{display:inline-block;width:1em;height:1em;stroke-width:0;stroke:currentColor;fill:currentColor;font-style:normal;font-weight:400;speak:none;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.Contacts-module--contacts--1rGd1{margin-bottom:1.625rem}.Contacts-module--contacts__list--3OgdW{display:flex;flex-flow:row wrap;flex-grow:0;flex-shrink:0;list-style:none;padding:0;margin:.625rem -.1875rem;width:8.75rem}.Contacts-module--contacts__list-item--16p9q{padding:0;margin:.25rem;display:flex;align-content:center;align-items:center;justify-content:center;height:35px;width:2.1875rem;line-height:2.1875rem;border-radius:50%;text-align:center;border:1px solid #ebebeb}.Contacts-module--contacts__list-item-link--2MIDn{border:0;display:flex;color:#222}.Contacts-module--contacts__list-item-link--2MIDn:focus,.Contacts-module--contacts__list-item-link--2MIDn:hover{color:#5d93ff}.Copyright-module--copyright--1ariN{color:#b6b6b6;font-size:.875rem}.Menu-module--menu--Efbin{margin-bottom:1.625rem}.Menu-module--menu__list--31Zeo{list-style:none;padding:0;margin:0}.Menu-module--menu__list-item--1lJ6B{padding:0;margin:.625rem 0}.Menu-module--menu__list-item-link--10Ush{font-size:1rem;color:#222;font-weight:400;border:0}.Menu-module--menu__list-item-link--10Ush:focus,.Menu-module--menu__list-item-link--10Ush:hover{color:#5d93ff;border-bottom:1px solid #5d93ff}.Menu-module--menu__list-item-link--active--2CbUO{color:#222;border-bottom:1px solid #222}.Sidebar-module--sidebar--X4z2p{width:100%}.Sidebar-module--sidebar__inner--Jdc5s{position:relative;padding:1.5625rem 1.25rem 0}@media screen and (min-width:685px){.Sidebar-module--sidebar--X4z2p{width:calc(41.625% - 1.09375rem)}.Sidebar-module--sidebar--X4z2p:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Sidebar-module--sidebar--X4z2p:last-child{margin-right:0}.Sidebar-module--sidebar--X4z2p:nth-child(12n){margin-right:0;float:right}.Sidebar-module--sidebar--X4z2p:nth-child(12n+1){clear:both}.Sidebar-module--sidebar__inner--Jdc5s{padding:1.875rem 1.25rem 0}.Sidebar-module--sidebar__inner--Jdc5s:after{background:#e6e6e6;background:linear-gradient(180deg,#e6e6e6 0,#e6e6e6 48%,#fff);position:absolute;content:"";width:.0625rem;height:540px;top:30px;right:-10px;bottom:0}}@media screen and (min-width:960px){.Sidebar-module--sidebar--X4z2p{width:calc(33.3% - 1.25rem)}.Sidebar-module--sidebar--X4z2p:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Sidebar-module--sidebar--X4z2p:last-child{margin-right:0}.Sidebar-module--sidebar--X4z2p:nth-child(3n){margin-right:0;float:right}.Sidebar-module--sidebar--X4z2p:nth-child(3n+1){clear:both}.Sidebar-module--sidebar__inner--Jdc5s{padding:2.5rem}}.Layout-module--layout--3Pyz6{max-width:66.875rem;margin-left:auto;margin-right:auto}.Layout-module--layout--3Pyz6:before{content:"";display:table}.Layout-module--layout--3Pyz6:after{content:"";display:table;clear:both}.Feed-module--feed__item--2D5rE{margin-bottom:2.03125rem}.Feed-module--feed__item--2D5rE:last-child{margin-bottom:.8125rem}.Feed-module--feed__item-title--3nigr{font-size:1.6875rem;line-height:2.4375rem;margin-top:0;margin-bottom:.8125rem}.Feed-module--feed__item-title-link--iFMRs{color:#222}.Feed-module--feed__item-title-link--iFMRs:focus,.Feed-module--feed__item-title-link--iFMRs:hover{color:#222;border-bottom:1px solid #222}.Feed-module--feed__item-description--1uO8e{font-size:1rem;line-height:1.625rem;margin-bottom:1.21875rem}.Feed-module--feed__item-meta-time--3t1fg{font-size:.875rem;color:#222;font-weight:600;text-transform:uppercase}.Feed-module--feed__item-meta-divider--N-Q0A{margin:0 .3125rem}.Feed-module--feed__item-meta-category-link--23f8F{font-size:.875rem;color:#f7a046;font-weight:600;text-transform:uppercase}.Feed-module--feed__item-meta-category-link--23f8F:focus,.Feed-module--feed__item-meta-category-link--23f8F:hover{color:#5d93ff}.Feed-module--feed__item-readmore--1u6bI{font-size:1rem;color:#5d93ff}.Feed-module--feed__item-readmore--1u6bI:focus,.Feed-module--feed__item-readmore--1u6bI:hover{color:#5d93ff;border-bottom:1px solid #5d93ff}.Page-module--page--2nMky{margin-bottom:3.25rem}.Page-module--page__inner--2M_vz{padding:1.5625rem 1.25rem}.Page-module--page__title--GPD8L{font-size:2.5rem;font-weight:600;line-height:3.25rem;margin-top:0;margin-bottom:2.35625rem}.Page-module--page__body--Ic6i6{font-size:1rem;line-height:1.625rem;margin:0 0 1.625rem}@media screen and (min-width:685px){.Page-module--page--2nMky{width:calc(58.275% - .78125rem)}.Page-module--page--2nMky:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Page-module--page--2nMky:last-child{margin-right:0}.Page-module--page--2nMky:nth-child(12n){margin-right:0;float:right}.Page-module--page--2nMky:nth-child(12n+1){clear:both}.Page-module--page__inner--2M_vz{padding:1.875rem 1.25rem}}@media screen and (min-width:960px){.Page-module--page--2nMky{width:calc(66.6% - .625rem)}.Page-module--page--2nMky:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Page-module--page--2nMky:last-child{margin-right:0}.Page-module--page--2nMky:nth-child(3n){margin-right:0;float:right}.Page-module--page--2nMky:nth-child(3n+1){clear:both}.Page-module--page__inner--2M_vz{padding:2.5rem 2.1875rem}}.Pagination-module--pagination--2H3nO{margin-top:3.25rem;display:flex}.Pagination-module--pagination__prev--bet5s{width:50%;text-align:left}.Pagination-module--pagination__prev-link--1Nzs6{color:#f7a046;font-size:1.625rem;font-weight:700}.Pagination-module--pagination__prev-link--1Nzs6:focus,.Pagination-module--pagination__prev-link--1Nzs6:hover{color:#5d93ff}.Pagination-module--pagination__prev-link--disable--Yklx9{pointer-events:none;color:#bbb}.Pagination-module--pagination__next--3hFiN{width:50%;text-align:right}.Pagination-module--pagination__next-link--3FUtA{color:#f7a046;font-size:1.625rem;font-weight:700}.Pagination-module--pagination__next-link--3FUtA:focus,.Pagination-module--pagination__next-link--3FUtA:hover{color:#5d93ff}.Pagination-module--pagination__next-link--disable--30UwZ{pointer-events:none;color:#bbb}.Author-module--author--2Yefr{border-top:1px solid #e6e6e6;max-width:40rem;padding-top:1.25rem;line-height:1.625rem;margin-top:1.625rem;margin-bottom:3.25rem}.Author-module--author__bio-twitter--n-O9n{display:block;text-decoration:underline}@media screen and (min-width:685px){.Author-module--author--2Yefr{margin-left:auto;margin-right:auto}}.Content-module--content--3p512{max-width:59.0625rem;padding:0 .9375rem;margin:0 auto}.Content-module--content__title--2BDW9{font-size:2rem;max-width:40rem;font-weight:600;text-align:center;line-height:2.68125rem;margin:1.625rem auto 0}.Content-module--content__body--2TrQ- figure{margin-bottom:1.625rem}.Content-module--content__body--2TrQ- figure blockquote{font-style:italic;text-align:center;margin-top:0;padding:1.625rem 0}.Content-module--content__body--2TrQ- figure blockquote p{max-width:40rem;font-size:1.6817rem;margin-top:0;margin-bottom:1.625rem;line-height:2.4375rem}.Content-module--content__body--2TrQ- a{text-decoration:underline}.Content-module--content__body--2TrQ- *{max-width:40rem;margin-left:auto;margin-right:auto}.Content-module--content__body--2TrQ- img{max-width:100%}@media screen and (min-width:960px){.Content-module--content--3p512{padding:0}.Content-module--content__title--2BDW9{font-size:3rem;line-height:3.65625rem;margin-top:3.65625rem;margin-bottom:2.4375rem}.Content-module--content__body--2TrQ-,.Content-module--content__body--2TrQ- p{font-size:1.125rem;line-height:1.82813rem;margin-bottom:1.82813rem}}.Meta-module--meta__date--29eD7{font-style:italic}.Tags-module--tags--1L_ct{margin-bottom:.8125rem}.Tags-module--tags__list--91FqN{list-style:none;margin:0 -.625rem;padding:0}.Tags-module--tags__list-item--1M30P{display:inline-block;margin:.625rem .3125rem}.Tags-module--tags__list-item-link--3SL_8{display:inline-block;height:35px;padding:0 1.5rem;line-height:2.1875rem;border:1px solid #e6e6e6;text-decoration:none;border-radius:1.25rem;color:#222}.Tags-module--tags__list-item-link--3SL_8:focus,.Tags-module--tags__list-item-link--3SL_8:hover{color:#5d93ff}.Post-module--post__comments--25y6I,.Post-module--post__footer--3WzWU{max-width:40rem;margin:0 auto;padding:0 .9375rem}.Post-module--post__home-button--16Kl0{display:block;max-width:5.625rem;height:35px;padding:0 1.5rem;line-height:2.1875rem;text-align:center;color:#222;border:1px solid #e6e6e6;border-radius:1.25rem;font-size:1rem;font-weight:400;margin-left:auto;margin-right:auto;margin-top:1.625rem}.Post-module--post__home-button--16Kl0:focus,.Post-module--post__home-button--16Kl0:hover{color:#5d93ff}@media screen and (min-width:960px){.Post-module--post__comments--25y6I,.Post-module--post__footer--3WzWU{padding:0}.Post-module--post__home-button--16Kl0{position:fixed;max-width:auto;margin:0;top:30px;left:30px}}</style><meta name="generator" content="Gatsby 2.32.13"/><link rel="alternate" type="application/rss+xml" title="Kay Mathew Blog" href="/rss.xml"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-73379983-2"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-73379983-2', {"send_page_view":false});
      }
      </script><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="icon" href="/favicon-32x32.png?v=56b2458559ac491d31a0971e8c393b2a" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#F7A046"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=56b2458559ac491d31a0971e8c393b2a"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=56b2458559ac491d31a0971e8c393b2a"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=56b2458559ac491d31a0971e8c393b2a"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=56b2458559ac491d31a0971e8c393b2a"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=56b2458559ac491d31a0971e8c393b2a"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=56b2458559ac491d31a0971e8c393b2a"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=56b2458559ac491d31a0971e8c393b2a"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=56b2458559ac491d31a0971e8c393b2a"/><title data-react-helmet="true">Pt 3: Build a CSS-in-JS React App with Styled Components and Priceline Design System - Kay Mathew Blog</title><meta data-react-helmet="true" name="description" content="Previously on this series, we learned about lazy loading and its multiple performance benefits for our application. We then proceeded to implement lazy loading within our application using the `react-loadable` NPM package. We also created some custom styled components for our application.
Today, we&#x27;ll do just a little bit more. We&#x27;ll setup a state management system for our application. We&#x27;ll also setup route transition animations for smoother switches from one route to another."/><meta data-react-helmet="true" property="og:site_name" content="Pt 3: Build a CSS-in-JS React App with Styled Components and Priceline Design System - Kay Mathew Blog"/><meta data-react-helmet="true" property="og:image" content="https://kaymathew.comhttps://steemitimages.com/256x512/https://cdn.steemitimages.com/DQmQ6kPN7SAM8YfEr1o7Lf2K2RzGK8PJ4yjyHrdgngxbzZ1/Flux-Flow.jpg"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="Pt 3: Build a CSS-in-JS React App with Styled Components and Priceline Design System - Kay Mathew Blog"/><meta data-react-helmet="true" name="twitter:description" content="Previously on this series, we learned about lazy loading and its multiple performance benefits for our application. We then proceeded to implement lazy loading within our application using the `react-loadable` NPM package. We also created some custom styled components for our application.
Today, we&#x27;ll do just a little bit more. We&#x27;ll setup a state management system for our application. We&#x27;ll also setup route transition animations for smoother switches from one route to another."/><meta data-react-helmet="true" name="twitter:image" content="https://kaymathew.comhttps://steemitimages.com/256x512/https://cdn.steemitimages.com/DQmQ6kPN7SAM8YfEr1o7Lf2K2RzGK8PJ4yjyHrdgngxbzZ1/Flux-Flow.jpg"/><link as="script" rel="preload" href="/webpack-runtime-6e8f4530e65e044697da.js"/><link as="script" rel="preload" href="/framework-b17a64ad725e0b3c1338.js"/><link as="script" rel="preload" href="/532a2f07-92db97c0addf07d5cb73.js"/><link as="script" rel="preload" href="/app-bfb28f4816626504eedd.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/cd95ea5cbd2c605f26db819f07999610c9ff4310-dad06fceb22da7c71227.js"/><link as="script" rel="preload" href="/643651a62fb35a9bb4f20061cb1f214a352d7976-aa8c016fcb5d24453301.js"/><link as="script" rel="preload" href="/component---src-templates-post-template-js-ec77146d0cf71b2b963c.js"/><link as="fetch" rel="preload" href="/page-data/posts/pt-3-build-a-css-in-js-react-app-with-styled-components-and-priceline-design-system/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/251939775.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/401334301.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/4120999787.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Layout-module--layout--3Pyz6"><div><a class="Post-module--post__home-button--16Kl0" href="/">All Articles</a><div><div class="Content-module--content--3p512"><h1 class="Content-module--content__title--2BDW9">Pt 3: Build a CSS-in-JS React App with Styled Components and Priceline Design System</h1><div class="Content-module--content__body--2TrQ-"><p><img src="https://cdn.steemitimages.com/DQmQ6kPN7SAM8YfEr1o7Lf2K2RzGK8PJ4yjyHrdgngxbzZ1/Flux-Flow.jpg" alt="Image of Flux unidirectional data flow compared with multidirectional data flow."></p>
<p>Previously on this series, we learned about lazy loading and its multiple performance benefits for our application. We then proceeded to implement lazy loading within our application using the <code class="language-text">react-loadable</code> NPM package. We also created some custom styled components for our application.</p>
<p>Today, we’ll do just a little bit more. We’ll setup a state management system for our application. We’ll also setup route transition animations for smoother switches from one route to another.</p>
<h4 id="what-will-i-learn" style="position:relative;"><a href="#what-will-i-learn" aria-label="what will i learn permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What Will I Learn?</h4>
<p>We expect to have gained a superior understanding of state management upon arriving at the end of this tutorial. We should also understand how to setup both state management for our applications and route based transitions for our applications. We’ll be covering the following:</p>
<ul>
<li>Implementing state management in React with Redux-saga.</li>
<li>Keeping our state immutable with <code class="language-text">Immutable.js</code></li>
<li>Making reducers and sagas play nice.</li>
<li>Setting up route based transitions within our React application.</li>
</ul>
<h4 id="requirements" style="position:relative;"><a href="#requirements" aria-label="requirements permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Requirements</h4>
<ul>
<li><a href="https://nodejs.org" target="_blank" rel="nofollow noopener noreferrer">Node.js</a> 8.0 or greater.</li>
<li><a href="https://npmjs.com" target="_blank" rel="nofollow noopener noreferrer">NPM</a> 3.0 or greater.</li>
<li><a href="https://yarnpkg.com" target="_blank" rel="nofollow noopener noreferrer">Yarn</a> package manager</li>
<li><a href="https://github.com" target="_blank" rel="nofollow noopener noreferrer">Git</a></li>
<li><a href="https://github.com/creatrixity/fireliners" target="_blank" rel="nofollow noopener noreferrer">Previous code on this series</a></li>
<li>An intermediate level of <a href="https://reactjs.org" target="_blank" rel="nofollow noopener noreferrer">ReactJS</a> knowledge.</li>
<li>Keen interest and patience.</li>
</ul>
<h4 id="introduction" style="position:relative;"><a href="#introduction" aria-label="introduction permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h4>
<p>Welcome back to the series! It’s great for us to know we’ve been making progress and to stay in sync with the last known state of our application let’s remember our current application structure:</p>
<ul>
<li>
<p><strong>fire-liners/</strong></p>
<ul>
<li>config/…</li>
<li>node_modules/…</li>
<li>public/…</li>
<li>scripts/…</li>
<li><strong>src/</strong></li>
<li>
<p>components/</p>
<ul>
<li>Header/</li>
<li>index.js</li>
<li>logo.svg</li>
</ul>
</li>
<li>
<p>containers/</p>
<ul>
<li>App/</li>
<li>App.test.js</li>
<li>index.js</li>
</ul>
</li>
<li>
<p>screens/</p>
<ul>
<li>Home /</li>
<li>index.js</li>
<li>Loading /</li>
<li>index.js</li>
</ul>
</li>
<li>registerServiceWorker.js</li>
<li>package.json</li>
</ul>
</li>
</ul>
<p>Previously, we gained an understanding lazy loading as a tool to optimize load times. Today, we’ll be looking at the mysterious, often dreaded world of state management. <em>“What is state management and why do we need it anyway?”</em>, you may ask yourself. Well, here’s a little story involving the primary actor—you as a React developer. You’re engineering your latest marvel with React and everything is going swell, until you face an important problem; you need to have two React components communicate with each other <em>without one component getting in the way of the other component</em>.</p>
<p>In this case, you’re building a shopping app and you’d love to be able to update the cart counter at the top right hand corner with the total number of items a user added to their cart. This is usually troublesome as you have to device a solution for this problem. However, with state management you can simply send information to a central store and every component can access it and get whatever information they are interested in.</p>
<p><img src="https://cdn.steemitimages.com/DQmTbKh9UsSz6uW2amzukeqFWqAUieUhunBDYJAkV7ipNaS/State-Management.jpg" alt="State flow without a state management system versus state flow with a management system"></p>
<p>Let’s break down some important terms before proceeding further:</p>
<p><strong>What is State?</strong></p>
<p>State simply means all data present in the application at a particular point in time. These datum could either be user generated or of third party origin. A good example of data within an application that can be considered as state is the simple boolean switch within a user’s settings panel that allows the user choose to either receive notifications or go without.</p>
<p><strong>What is State Management?</strong></p>
<p>State management simply refers to an architecture devised to ensure state is easily accessible and modifiable. You may write a custom state management mechanism or you may just piggyback on the excellent open source solutions accessible to all of us. Several excellent state management solutions such as Redux and MobX are freely available. For the remainder of our tutorial, we’ll be narrowing our focus to the Redux state management solution.</p>
<p><strong>What is Redux?</strong></p>
<p>Redux is a contraction of the terms <strong>Red</strong>ucers and Fl<strong>ux</strong>. Redux is a state management solution that marries the popular use of reducers in Javascript with the Flux ideology that was inspired by Facebook. This begs the questions posed below.</p>
<p><strong>What are Reducers?</strong></p>
<p>Reducers are functions that try to collapse multiple values to a single value. For instance, using reducers, we may attempt to obtain the maximum value from a range of values. Take the following example in which we find the largest id in the <code class="language-text">items</code> array. We do that by passing a method and an integer to the <code class="language-text">reduce</code> method. This method will return the maximum value between the current item under consideration and the maximum previous value. The integer provided is the “initialization value” which basically begins <code class="language-text">maxId</code> at <code class="language-text">-1</code>. This reducer can be used when you need to add a new entry to the <code class="language-text">items</code> array.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> items <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">"Rush of Blood to the Head"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">"Viva la Vida or Death and all His Friends"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token string">"Parachutes"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> largestId <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">maxId<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token operator">=></span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>id<span class="token punctuation">,</span> maxId<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// returns 14</span></code></pre></div>
<p><strong>What is Flux?</strong></p>
<p>Flux is an application architecture philosophy from Facebook that tries to make applications easier to build and maintain by enforcing a singular direction for data flow. This is also called the <em>unidirectional data flow model</em>. Flux strips out unnecessary complexity so we can write our code with less headaches.</p>
<p>![Image of Flux unidirectional data flow compared with multidirectional data flow.(<a href="https://cdn.steemitimages.com/DQmQ6kPN7SAM8YfEr1o7Lf2K2RzGK8PJ4yjyHrdgngxbzZ1/Flux-Flow.jpg" target="_blank" rel="nofollow noopener noreferrer">https://cdn.steemitimages.com/DQmQ6kPN7SAM8YfEr1o7Lf2K2RzGK8PJ4yjyHrdgngxbzZ1/Flux-Flow.jpg</a>)</p>
<p><strong>What is State Immutability and Why Should I Care About It ?</strong></p>
<p>State immutability is a concept that describes state that is prone to change, as conversely being prone to errors.</p>
<p>Basically, state immutability simply means, “Dude, never change or mutate the state in an application”. I know you’ve got your eyebrows up and about to go into an uproar. “But how do we get anything done without changing the state?”, you exclaim. Well, the solution to that is that we should never change state, we should only change a copy of the state object and enforce it as the current representation of the state. This is helpful in more ways than one. Implementing brain-wracking techniques like undo actions (<code class="language-text">Ctrl + Z</code>) becomes a piece of cake and we can easily revert to a previous state image if we make an error. Also, when we hot reload our code, we don’t have our state thrown out the window, but still readily available and useful.</p>
<p>We can implement state immutability in our application by leveraging the <code class="language-text">ImmutableJS</code> package <a href="https://facebook.github.io/immutable-js/" target="_blank" rel="nofollow noopener noreferrer">(also by Facebook)</a>.</p>
<p><strong>…Lastly, What Are Sagas and How Are They Related to Redux?</strong></p>
<p>A Saga is like a separate part of your application that’s solely responsible for side effects. When you’re building apps, any actions that are carried out may come with their own side effects. For example, when making an asynchronous request, a common side effect encountered is the inability of the client to cancel the request in the case of inadvertent triggers. A Saga can help us handle such side effects.</p>
<p>According to its <a href="https://github.com/redux-saga/redux-saga" target="_blank" rel="nofollow noopener noreferrer">official Github page</a>, Redux Saga is a library that aims to make application side effects (i.e. asynchronous things like data fetching and impure things like accessing the browser cache) easier to manage, more efficient to execute, simple to test, and better at handling failures.</p>
<p>Sagas use an interesting new concept in ECMAScript 6 called generators. You can learn all about generators in ES6 <a href="https://redux-saga.js.org/docs/ExternalResources.html" target="_blank" rel="nofollow noopener noreferrer">here</a></p>
<h4 id="a-gentle-introduction-to-redux" style="position:relative;"><a href="#a-gentle-introduction-to-redux" aria-label="a gentle introduction to redux permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A Gentle Introduction To Redux</h4>
<p>Redux works with a set of separate but related entities. We’ll be looking at these entities and their roles within a Redux application</p>
<ul>
<li><strong>Reducers</strong>: Reducers are ‘pure’ JavaScript functions that accept a state object along with an action object and returns a new state object. As an example, this is a typical Redux reducer. Here, it accepts an <code class="language-text">initialState</code> object as an argument and it also accepts an action object. Notice how our reducer doesn’t attempt to mutate the state, rather <em>it returns a new state object based on the action object it was passed</em>.</li>
</ul>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">"The Shawshank Redemption"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">AppReducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token constant">SET_TITLE</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        title<span class="token operator">:</span> action<span class="token punctuation">.</span>data<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
      <span class="token punctuation">}</span>

    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<ul>
<li><strong>Action Dispatchers</strong>: These are the little guys that tell the Redux store something has happened. They simply call the <code class="language-text">dispatch</code> method with an action object as the argument.</li>
<li><strong>Action Objects</strong>: These are simple objects with the required property of a <code class="language-text">type</code> and an optional argument. If action dispatchers are messengers, then action objects are the messages they transport.</li>
</ul>
<h4 id="a-gentle-introduction-to-sagas" style="position:relative;"><a href="#a-gentle-introduction-to-sagas" aria-label="a gentle introduction to sagas permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A Gentle Introduction To Sagas</h4>
<p>Sagas are kinda like reducers and actions rolled in one. They are capable of dispatching action objects that can be acted upon by reducers and they are also capable of listening for action objects to act upon in they own right.</p>
<p>A typical saga looks like the one below. Here, we have the generator method <code class="language-text">setAppTitle</code> that uses the yield statement to obtain the <code class="language-text">title</code> value from <code class="language-text">getAppTitle</code>. Upon obtaining the title, it then uses the <code class="language-text">put</code> method from <code class="language-text">redux-saga</code> to try and set the title of the app.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">setAppTitle</span><span class="token punctuation">(</span><span class="token parameter">payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>getAppTitle<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token constant">SET_APP_TITLE</span><span class="token punctuation">,</span>
    payload<span class="token operator">:</span> <span class="token punctuation">{</span>
      title<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">takeLatest</span><span class="token punctuation">(</span><span class="token constant">SET_APP_TITLE_REQUEST</span><span class="token punctuation">,</span> setAppTitle<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<h4 id="getting-started-with-state-management-in-redux" style="position:relative;"><a href="#getting-started-with-state-management-in-redux" aria-label="getting started with state management in redux permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting Started with State Management in Redux.</h4>
<p>We’ll be writing code that allows our app add new quotes that can be displayed on the index page. We’ll do that by sending our data to the Redux store upon submission and that’ll allow us to access it from any part of our application.</p>
<p>We’ll install the following packages:</p>
<ul>
<li><code class="language-text">redux</code></li>
<li><code class="language-text">react-router-redux</code>: This helps our <code class="language-text">react-router</code> stay in sync with our redux store.</li>
<li><code class="language-text">redux-saga</code></li>
<li><code class="language-text">redux-localstorage</code></li>
<li><code class="language-text">immutable</code></li>
</ul>
<p>We’ll be using the Redux Local Storage middleware to persist our state to the browser’s storage for ease of accessibility.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm i --save immutable redux react-router-redux redux-saga redux-localstorage</code></pre></div>
<p>We’ll be changing our application structure a little bit. Our new application structure will resemble the one below. The changes have been highlighted.</p>
<ul>
<li>
<p><strong>fire-liners/</strong></p>
<ul>
<li>config/…</li>
<li>node_modules/…</li>
<li>public/…</li>
<li>scripts/…</li>
<li><strong>src/</strong></li>
<li>
<p>components/</p>
<ul>
<li>Header/</li>
<li>index.js</li>
<li>logo.svg</li>
</ul>
</li>
<li>
<p>containers/</p>
<ul>
<li>App/</li>
<li><strong>reducer.js</strong></li>
<li><strong>constants.js</strong></li>
<li><strong>actions.js</strong></li>
<li>index.js</li>
</ul>
</li>
<li>screens/…</li>
<li>
<p><strong>redux/</strong></p>
<ul>
<li><strong>store.js</strong></li>
<li><strong>reducers.js</strong></li>
</ul>
</li>
<li>registerServiceWorker.js</li>
<li>package.json</li>
</ul>
</li>
</ul>
<p>We’ll be setting up our feed of liners to source data from the Redux store instead of from an array, but first of all, let’s setup the Redux application structure. We’ll modify <code class="language-text">src/index.js</code> and have our app access the soon to be created Redux store. We’ll first list out our dependencies. We’ll need the <code class="language-text">Provider</code> component that will allow our app access the Redux store. We’ll also need the <code class="language-text">browserHistory</code> method that allows us get the browsers history object. We also use the <code class="language-text">syncHistoryWithStore</code> method to keep the history up to date with the store. Finally, we’ll be using the <code class="language-text">store</code> object which we’re yet to create.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">"react-dom"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-redux"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> browserHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-router"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-router-dom"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> syncHistoryWithStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-router-redux"</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">"./redux/store"</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">"./containers/App"</span></code></pre></div>
<p>Next, setup the application to use the above mentioned dependencies.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> history <span class="token operator">=</span> <span class="token function">syncHistoryWithStore</span><span class="token punctuation">(</span>browserHistory<span class="token punctuation">,</span> store<span class="token punctuation">)</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>Router history<span class="token operator">=</span><span class="token punctuation">{</span>history<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"root"</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre></div>
<p>We’ll create the <code class="language-text">store.js</code> module at <code class="language-text">src/redux</code>. We’ll be using the <code class="language-text">createStore</code> and <code class="language-text">applyMiddleware</code> methods from <code class="language-text">redux</code> to help us create a <code class="language-text">redux</code> store and then apply some middleware that allows us extend the store’s capabilities. We’ll also use a so-called ‘rootReducer’ that actually just combines separate reducers into one giant object. In our <code class="language-text">configure</code> method, we check if the browser window has the Redux DevTools extension installed. If it does, we create the store with Dev Tools support. We then apply middleware that helps us carry out various tasks. For now we’ll be using none. We then create the store supplying it all the reducers along with any possible initial state data we may have available which at the moment is an empty object.</p>
<p>Last of all, we check if we’re using hot module reloading. If we are using HMR, we keep the reducer updated with every hot reload by replacing the current reducer with itself.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"redux"</span>

<span class="token keyword">import</span> rootReducer <span class="token keyword">from</span> <span class="token string">"./reducers"</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token parameter">initialState <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> create <span class="token operator">=</span> window<span class="token punctuation">.</span>devToolsExtension
    <span class="token operator">?</span> window<span class="token punctuation">.</span><span class="token function">devToolsExtension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>createStore<span class="token punctuation">)</span>
    <span class="token operator">:</span> createStore

  <span class="token keyword">const</span> createStoreWithMiddleware <span class="token operator">=</span> <span class="token function">applyMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>create<span class="token punctuation">)</span>

  <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStoreWithMiddleware</span><span class="token punctuation">(</span>rootReducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">"./reducers"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> nextReducer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./reducers"</span><span class="token punctuation">)</span>
      store<span class="token punctuation">.</span><span class="token function">replaceReducer</span><span class="token punctuation">(</span>nextReducer<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> store
<span class="token punctuation">}</span></code></pre></div>
<p>Let’s create <code class="language-text">src/redux/reducers</code> and get to work. We’ll be importing a single reducer (the app reducer) from <code class="language-text">src/containers/App/reducer</code>. We’ll also be importing the <code class="language-text">combineReducers</code> method from <code class="language-text">redux</code>.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"redux"</span>
<span class="token keyword">import</span> AppReducer <span class="token keyword">from</span> <span class="token string">"../containers/App/reducer"</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  app<span class="token operator">:</span> AppReducer<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>We now have to create the <code class="language-text">AppReducer</code> which we’ll make available at <code class="language-text">src/containers/App/reducer.js</code>. We’ll be importing the <code class="language-text">fromJS</code> method from the
ImmutableJS library. This <code class="language-text">fromJS</code> method allows us to turn a regular JavaScript object to an Immutable object that can only be manipulated through an API that is exposed by the Immutable library. Also, we’ll be defining a set of constants in the <code class="language-text">src/containers/App/constants.js</code> as a good programming practice. We then define the
initial state for our app as an ImmutableJS object with the <code class="language-text">liners</code> property set to an empty array.</p>
<p>Finally, we define the <code class="language-text">AppReducer</code> function that accepts the state (we set it to the initial state by default) and the action object. We use the <code class="language-text">switch</code> statement on the <code class="language-text">action.type</code> to get the <code class="language-text">action.type</code> value that corresponds to <code class="language-text">SET_LINERS_DATA</code>. If we get a match, we set the <code class="language-text">liners</code> property of the Immutable <code class="language-text">initialState</code> to the value contained in the <code class="language-text">action.data</code>.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> fromJS <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'Immutable'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">SET_LINERS_DATA</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./constants'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token function">fromJS</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    liners<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">const</span> <span class="token function-variable function">AppReducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token constant">SET_LINERS_DATA</span><span class="token operator">:</span>
            <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'liners'</span><span class="token punctuation">,</span> action<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">return</span> state
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>So as an example, our <code class="language-text">action</code> object may look like this:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'SET_LINERS_DATA'</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
            body<span class="token operator">:</span> <span class="token string">"It's a new world"</span><span class="token punctuation">,</span>
            author<span class="token operator">:</span> <span class="token string">"Bryan Adams"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token operator">...</span><span class="token punctuation">.</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We’ve successfully setup our initial Redux application structure. Let’s do something with it. First of all, real web apps typically make requests to an external API for data. Let’s mimic the real thing by moving our liners data from an array to a JSON file. Create <code class="language-text">assets/liners.json</code> and add some JSON data.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token string">"id"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">"author"</span><span class="token operator">:</span> <span class="token string">"Immortal Technique"</span><span class="token punctuation">,</span>
    <span class="token string">"government_name"</span><span class="token operator">:</span> <span class="token string">"Felipe Andres Coronel"</span><span class="token punctuation">,</span>
    <span class="token string">"body"</span><span class="token operator">:</span> <span class="token string">"The purpose of life is a life with a purpose. Rather die for what I believe in than live a life that is worthless."</span><span class="token punctuation">,</span>
    <span class="token string">"photo"</span><span class="token operator">:</span> <span class="token string">"immortal-technique.jpg"</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token string">"id"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string">"author"</span><span class="token operator">:</span> <span class="token string">"Eminem"</span><span class="token punctuation">,</span>
    <span class="token string">"government_name"</span><span class="token operator">:</span> <span class="token string">"Marshall Mathers"</span><span class="token punctuation">,</span>
    <span class="token string">"body"</span><span class="token operator">:</span> <span class="token string">"I don't rap for dead presidents. I'd rather see the president dead."</span><span class="token punctuation">,</span>
    <span class="token string">"photo"</span><span class="token operator">:</span> <span class="token string">"eminem.jpg"</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token string">"id"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token string">"author"</span><span class="token operator">:</span> <span class="token string">"Andre 3000"</span><span class="token punctuation">,</span>
    <span class="token string">"body"</span><span class="token operator">:</span> <span class="token string">"Hell just fell 3000 more degrees cooler but y'all can't measure my worth; and before you do, you'll need a ruler made by all the Greek gods."</span><span class="token punctuation">,</span>
    <span class="token string">"photo"</span><span class="token operator">:</span> <span class="token string">"andre-3k.jpg"</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>
Then we'll update the code at <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>src<span class="token operator">/</span>screens<span class="token operator">/</span>home<span class="token operator">/</span>index<span class="token punctuation">.</span>js
 to reflect the change<span class="token punctuation">.</span> Remove <span class="token keyword">this</span> line<span class="token punctuation">.</span>
<span class="token constant">T</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>`js
<span class="token keyword">const</span> liners <span class="token operator">=</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span></code></pre></div>
<p>… And instead, run this import at the top.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> liners <span class="token keyword">from</span> <span class="token string">"../data/liners.json"</span></code></pre></div>
<p>We’ll update the code at <code class="language-text">src/screens/home/index.js</code> to reflect the change. Remove this line.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> liners <span class="token operator">=</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span></code></pre></div>
<p>… And instead, run this import at the top.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> liners <span class="token keyword">from</span> <span class="token string">"../data/liners.json"</span></code></pre></div>
<p>The switch in architecture here helps us move our data from non-flexible format to a more convenient one.</p>
<p>However, looking deeper, we’ve got some optimizations we could add to help our app more production-ready. We’ll be leveraging the power of sagas to help make our application run with better separation of concerns. In a typical production app, we’d probably be making a HTTP request for the data instead of just importing it from a local source. Let’s attempt to replicate this behavior using Redux saga</p>
<h4 id="setting-up-our-sagas" style="position:relative;"><a href="#setting-up-our-sagas" aria-label="setting up our sagas permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setting Up Our Sagas.</h4>
<p>We’d like to request for our liners data when we start our application by visiting the homepage. Let’s work on <code class="language-text">src/screens/Home/index.js</code> and make some changes. Add this lifecycle event handler method to the <code class="language-text">Home</code> class. We want our app to fetch the liners when our component mounts. Here, we are taking advantage of the <code class="language-text">this.props</code> global object which is freely accessible from any class extending <code class="language-text">React.Component</code>.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">fetchLiners</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span></code></pre></div>
<p>Next, we’d like a way to be able to access state from our component. We can have this done by defining a function called <code class="language-text">mapStateToProps</code> that accepts the state and returns an object accessible through <code class="language-text">this.props</code>. Within the returned object, we expose the liners object we’ll be creating soon.</p>
<p>We’ll like to be able to run or ‘dispatch’ actions from our component. That’s a breeze with the <code class="language-text">mapDispatchToProps</code> function. As you can see, it’s really similar to the <code class="language-text">mapStateToProps</code> method with the only difference being that <code class="language-text">mapStateToProps</code> returns objects while <code class="language-text">mapDispatchToProps</code> returns methods. In this function, we get to dispatch the <code class="language-text">fetchLiners</code> method we’ll soon be creating.</p>
<p>Finally, we change our default export from simply exporting the <code class="language-text">Home</code> class to exporting the <code class="language-text">connect</code> method from <code class="language-text">react-redux</code>. Of course, we pass <code class="language-text">mapStateToProps</code> and <code class="language-text">mapDispatchToProps</code> as our arguments as well as the <code class="language-text">Home</code> class as the self invoking method parameter.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-redux"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fetchLinersRequest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./actions"</span>

<span class="token keyword">const</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token parameter">state</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    liners<span class="token operator">:</span> state<span class="token punctuation">.</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"liners"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">mapDispatchToProps</span> <span class="token operator">=</span> <span class="token parameter">dispatch</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">fetchLiners</span><span class="token operator">:</span> <span class="token parameter">data</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">fetchLinersRequest</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>
  mapStateToProps<span class="token punctuation">,</span>
  mapDispatchToProps
<span class="token punctuation">)</span><span class="token punctuation">(</span>Home<span class="token punctuation">)</span></code></pre></div>
<p>Let’s create the <code class="language-text">fetchLinersRequest</code> action at <code class="language-text">src/screens/Home/actions.js</code>. It’s a simple method that returns an action object. We’re using a yet to be created constant so create <code class="language-text">src/screens/Home/constants.js</code> and add a single line</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">ADD_LINERS_REQUEST</span> <span class="token operator">=</span> <span class="token string">"app/ADD_LINERS_REQUEST"</span></code></pre></div>
<p>Then we use our newly created constant in our action.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">ADD_LINERS_REQUEST</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./constants"</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">fetchLinersRequest</span> <span class="token operator">=</span> <span class="token parameter">data</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token constant">ADD_LINERS_REQUEST</span><span class="token punctuation">,</span>
    data<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We’re doing great. We are now letting our app now we’d like to request for our data when we start our app, but our app unfortunately, doesn’t know about our request. Let’s fix that by creating our first saga. We’ll create <code class="language-text">src/screens/Home/saga.js</code> and get to work asap. First of all, we’ll import our dependencies, We’ll be using the <code class="language-text">all</code>, <code class="language-text">call</code>, <code class="language-text">put</code> and <code class="language-text">takeLatest</code> methods from <code class="language-text">redux-saga/effects</code> to carry out some tasks. We’ll be creating a data service that we’ll assign the responsibility of fetching our data. We’ll also import a couple of constants.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> all<span class="token punctuation">,</span> call<span class="token punctuation">,</span> put<span class="token punctuation">,</span> takeLatest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"redux-saga/effects"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getLinersData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../services/DataService"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">ADD_LINERS_REQUEST</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./constants"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">SET_LINERS_DATA</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../containers/App/constants"</span></code></pre></div>
<p>Next, we define a generator function called <code class="language-text">fetchLiners</code> that’ll help us make a call to the data service for data. We use the <code class="language-text">yield</code> statement in combination with the <code class="language-text">call</code> method to get our data. We then use <code class="language-text">redux-saga</code>s <code class="language-text">put</code> method to dispatch <code class="language-text">SET_LINERS_DATA</code> to our reducer. We’ll be passing the response obtained from our request as the payload.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">fetchLiners</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>getLinersData<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token constant">SET_LINERS_DATA</span><span class="token punctuation">,</span>
    payload<span class="token operator">:</span> <span class="token punctuation">{</span>
      data<span class="token operator">:</span> response<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Finally, we have to setup our default export, which will be a generator function. We’ll be supplying the <code class="language-text">all</code> method with an array of saga listeners. For now, we’ll add one that executes once for every time a saga action object is released. We do this by using the <code class="language-text">takeLatest</code> method and supplying it the label constant and the method that should be executed.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">/**
 * We process only the latest action
 */</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">takeLatest</span><span class="token punctuation">(</span><span class="token constant">ADD_LINERS_REQUEST</span><span class="token punctuation">,</span> fetchLiners<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We’ll now create the <code class="language-text">getLinersData</code> method at <code class="language-text">src/services/DataService/index.js</code>. The Data Service will fetch the data from the JSON file and then return the data in form of a promise that we can use redux-saga’s <code class="language-text">call</code> method to resolve.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> linersData <span class="token keyword">from</span> <span class="token string">"../../data/liners.json"</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getLinersData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id <span class="token operator">=</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> liner <span class="token operator">=</span> linersData<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">liner</span> <span class="token operator">=></span> liner<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>liner<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span>linersData<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Now that we have our saga setup, we need to register it in the store. We can do this by updating <code class="language-text">src/redux/store.js</code>. We’ll import the <code class="language-text">createSagaMiddleware</code> from <code class="language-text">redux-saga</code> that we’ll be using to (surprise) create the saga middleware. We’ll also import the <code class="language-text">rootSaga</code> which we’re yet to create from <code class="language-text">src/redux/sagas.js</code>.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> createSagaMiddleware <span class="token keyword">from</span> <span class="token string">"redux-saga"</span>
<span class="token keyword">import</span> rootSaga <span class="token keyword">from</span> <span class="token string">"./sagas"</span></code></pre></div>
<p>Next, we add some code to the <code class="language-text">configure</code> method. We’ll assign the <code class="language-text">createSagaMiddleware</code> call to the <code class="language-text">sagaMiddleware</code> constant. We’ll also setup a <code class="language-text">middlewares</code> array to keep all our middlewares. We then use the ES6 object destructuring proposal to extract our middlewares into the <code class="language-text">applyMiddleware</code> call. Finally, we run the <code class="language-text">rootSaga</code> using the <code class="language-text">sagaMiddleware</code>.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> sagaMiddleware <span class="token operator">=</span> <span class="token function">createSagaMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> middlewares <span class="token operator">=</span> <span class="token punctuation">[</span>sagaMiddleware<span class="token punctuation">]</span>

<span class="token keyword">const</span> createStoreWithMiddleware <span class="token operator">=</span> <span class="token function">applyMiddleware</span><span class="token punctuation">(</span><span class="token operator">...</span>middlewares<span class="token punctuation">)</span><span class="token punctuation">(</span>create<span class="token punctuation">)</span>

sagaMiddleware<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>rootSaga<span class="token punctuation">)</span></code></pre></div>
<p>Let’s add some code to <code class="language-text">src/redux/sagas.js</code>. We’ll be using the <code class="language-text">all</code> and <code class="language-text">fork</code> methods from <code class="language-text">redux-saga</code> as well as the <code class="language-text">HomeScreenSaga</code> from the saga at the Home screen directory. We then define our default export which uses the <code class="language-text">all</code> method to combine multiple sagas. We then ‘fork’ the Home screen saga into our root saga.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> all<span class="token punctuation">,</span> fork <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"redux-saga/effects"</span>

<span class="token keyword">import</span> HomeScreenSaga <span class="token keyword">from</span> <span class="token string">"../screens/Home/saga"</span>

<span class="token comment">/**
 * rootSaga
 */</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">fork</span><span class="token punctuation">(</span>HomeScreenSaga<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>That’s awesome, if we head back to the browser you should see that our data loads when we visit the home view within the app.</p>
<p>It’s easy to get petulant and just moan, “We went through all this hard work just to display the same JSON data as we did before?“. Well, we just setup the foundations for a very solid application going forward.</p>
<h4 id="setting-up-route-based-transitions" style="position:relative;"><a href="#setting-up-route-based-transitions" aria-label="setting up route based transitions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setting up Route Based Transitions</h4>
<p>Transitions are cool. Yes, <em>very cool</em>. We’d like our application to be able to use transitions to keep switching routes from becoming boring. We can do this by using the transition group properties present within React Router. We’ll be adding a fade transition for our app. Let’s head over to <code class="language-text">src/containers/App/index.js</code> and get to work. For starters, we’ll import the <code class="language-text">TransitionGroup</code> component from <code class="language-text">react-transition-group</code>.</p>
<p>We also need to import the yet to be created <code class="language-text">FadeTransition</code> component from <code class="language-text">src/components/Transitions/fade.js</code>.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> TransitionGroup <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-transition-group"</span>
<span class="token keyword">import</span> FadeTransition <span class="token keyword">from</span> <span class="token string">"../../components/Transitions/fade"</span></code></pre></div>
<p>Next, we’ll update the <code class="language-text">render</code> method of the <code class="language-text">App</code> class to use our imports. We wrap everything in our <code class="language-text">TransitionGroup</code> and we also use our to be created <code class="language-text">FadeTransition</code> component.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">        <span class="token operator">&lt;</span>TransitionGroup<span class="token operator">></span>
            <span class="token operator">&lt;</span>FadeTransition key<span class="token operator">=</span><span class="token punctuation">{</span>location<span class="token punctuation">.</span>key<span class="token punctuation">}</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>ThemeProvider<span class="token operator">></span>
                    <span class="token operator">&lt;</span>Flex flexDirection<span class="token operator">=</span><span class="token string">"column"</span> className<span class="token operator">=</span><span class="token string">"App"</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> minHeight<span class="token operator">:</span> <span class="token string">'100vh'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>
                        <span class="token operator">&lt;</span>Header<span class="token operator">/</span><span class="token operator">></span>
                        <span class="token operator">&lt;</span>Route exact path<span class="token operator">=</span><span class="token string">"/"</span> component<span class="token operator">=</span><span class="token punctuation">{</span>LoadableHomeScreen<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
                        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/add"</span> component<span class="token operator">=</span><span class="token punctuation">{</span>LoadableAddLineScreen<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>Flex<span class="token operator">></span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>ThemeProvider<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>FadeTransition<span class="token operator">></span></code></pre></div>
<p>Next, let’s create <code class="language-text">src/components/Transitions/fade.js</code> and add some code. We’ll be basically wrapping the children components of this class within react-transition-group’s <code class="language-text">CSSTransition</code> method. We also specify a timeout and a CSS class for it.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CSSTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-transition-group"</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">FadeTransition</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children<span class="token punctuation">,</span> <span class="token operator">...</span>props <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>CSSTransition <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> timeout<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">200</span><span class="token punctuation">}</span> classNames<span class="token operator">=</span><span class="token string">"fade"</span><span class="token operator">></span>
      <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>CSSTransition<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> FadeTransition</code></pre></div>
<p>Finally, we’ll add a little CSS to <code class="language-text">src/index.js</code> just for effect.</p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.fade-enter</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.fade-enter.fade-enter-active</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> opacity 250ms ease-in<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre></div>
<p>Amazing! Switching routes come with some cool fade transitions. We’ve had an amazing day today working with React.</p>
<h4 id="conclusion" style="position:relative;"><a href="#conclusion" aria-label="conclusion permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h4>
<p>In this tutorial, we covered multiple concepts. We learned more about state management in large applications (like Utopian.io for example) and the benefits we can gain by adopting an architecture like Flux. We also setup a Redux application complete with actions and Sagas.</p>
<p>In our next tutorial, explore more capabilities of our state management system and we’ll actually setup dynamic data for feed population. Finally, we’ll add functionality that allows us to persist our state to lacal storage. Our next tutorial will be awesome!</p>
<h4 id="resources" style="position:relative;"><a href="#resources" aria-label="resources permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resources</h4>
<ul>
<li><a href="https://redux-saga.js.org/docs/introduction/" target="_blank" rel="nofollow noopener noreferrer">An Introduction to Redux Saga</a></li>
<li><a href="https://facebook.github.io/immutable-js/" target="_blank" rel="nofollow noopener noreferrer">An awesome introduction to ImmutableJS by Facebook</a> +<a href="https://redux-saga.js.org/docs/basics/UsingSagaHelpers.html" target="_blank" rel="nofollow noopener noreferrer">Using Saga Helpers</a></li>
<li><a href="https://reacttraining.com/react-router/web/guides/basic-components" target="_blank" rel="nofollow noopener noreferrer">React Router Transition</a></li>
<li><a href="https://github.com/creatrixity/fire-liners" target="_blank" rel="nofollow noopener noreferrer">FireLiners Github Code</a></li>
</ul>
<h4 id="curriculum" style="position:relative;"><a href="#curriculum" aria-label="curriculum permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Curriculum</h4>
<ul>
<li><a href="https://steemit.com/utopian-io/@creatrixity/pt-1-build-a-css-in-js-react-app-with-styled-components-and-priceline-design-system" target="_blank" rel="nofollow noopener noreferrer">Part 1: Build a CSS-in-JS React App with Styled Components and Priceline Design System</a></li>
<li><a href="https://www.kaymathew.com/posts/pt-2-build-a-css-in-js-react-app-with-styled-components-and-priceline-design-system/" target="_blank" rel="nofollow noopener noreferrer">Part 2: Build a CSS-in-JS React App with Styled Components and Priceline Design System</a></li>
<li><a href="https://www.kaymathew.com/posts/pt-3-build-a-css-in-js-react-app-with-styled-components-and-priceline-design-system/" target="_blank" rel="nofollow noopener noreferrer">Part 3: Build a CSS-in-JS React App with Styled Components and Priceline Design System</a></li>
</ul></div></div></div><div class="Post-module--post__footer--3WzWU"><div><p class="Meta-module--meta__date--29eD7">Published <!-- -->26 May 2018</p></div><div class="Tags-module--tags--1L_ct"><ul class="Tags-module--tags__list--91FqN"><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/javascript/">Javascript</a></li><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/react/">React</a></li></ul></div><div class="Author-module--author--2Yefr"><p>Hi there! I&#x27;m a Nigerian software engineer obsessed with building better experiences for users one keystroke at a time.<a class="Author-module--author__bio-twitter--n-O9n" href="https://www.twitter.com/@creatrixity" rel="noopener noreferrer" target="_blank"><strong>Caleb &quot;Kay&quot; Mathew</strong> on Twitter</a></p></div></div><div class="Post-module--post__comments--25y6I"></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/pt-3-build-a-css-in-js-react-app-with-styled-components-and-priceline-design-system/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-f8d6bc3f3d1ba44ac510.js"],"app":["/app-bfb28f4816626504eedd.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-fd4fb51a6fac1c18bdde.js"],"component---src-templates-categories-list-template-js":["/component---src-templates-categories-list-template-js-2181ec47d28e5c35d3e9.js"],"component---src-templates-category-template-js":["/component---src-templates-category-template-js-5aae539c8196fecbba8d.js"],"component---src-templates-index-template-js":["/component---src-templates-index-template-js-05fc9723794f32b59bfd.js"],"component---src-templates-not-found-template-js":["/component---src-templates-not-found-template-js-658f4507169e2836a377.js"],"component---src-templates-page-template-js":["/component---src-templates-page-template-js-e5d26cb3d79d752d51d9.js"],"component---src-templates-post-template-js":["/component---src-templates-post-template-js-ec77146d0cf71b2b963c.js"],"component---src-templates-tag-template-js":["/component---src-templates-tag-template-js-fb68c7b5b7b042469c6b.js"],"component---src-templates-tags-list-template-js":["/component---src-templates-tags-list-template-js-2d7007993fc2bf0f9caf.js"]};/*]]>*/</script><script src="/polyfill-f8d6bc3f3d1ba44ac510.js" nomodule=""></script><script src="/component---src-templates-post-template-js-ec77146d0cf71b2b963c.js" async=""></script><script src="/643651a62fb35a9bb4f20061cb1f214a352d7976-aa8c016fcb5d24453301.js" async=""></script><script src="/cd95ea5cbd2c605f26db819f07999610c9ff4310-dad06fceb22da7c71227.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-bfb28f4816626504eedd.js" async=""></script><script src="/532a2f07-92db97c0addf07d5cb73.js" async=""></script><script src="/framework-b17a64ad725e0b3c1338.js" async=""></script><script src="/webpack-runtime-6e8f4530e65e044697da.js" async=""></script></body></html>